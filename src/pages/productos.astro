---
import Navbar from '../components/Navbar.astro';
import ProductCard from '../components/ProductCard.astro';
import Footer from '../components/Footer.astro';

// Datos de ejemplo de productos
const allProducts = [
  {
    id: "1",
    name: "Gatito Amigurumi",
    price: 25.99,
    image: "https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400&h=300&fit=crop",
    description: "Adorable gatito hecho a mano con hilo suave y acrílico",
    category: "Animales",
    inStock: true
  },
  {
    id: "2",
    name: "Perrito Dormilón",
    price: 29.99,
    image: "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?w=400&h=300&fit=crop",
    description: "Perrito durmiendo plácidamente, perfecto para regalo",
    category: "Animales",
    inStock: true
  },
  {
    id: "3",
    name: "Unicornio Mágico",
    price: 35.99,
    image: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400&h=300&fit=crop",
    description: "Unicornio con colores vibrantes y detalles especiales",
    category: "Personajes",
    inStock: false
  },
  {
    id: "4",
    name: "Cactus Decorativo",
    price: 18.99,
    image: "https://images.unsplash.com/photo-1509423350716-97f9360b4e09?w=400&h=300&fit=crop",
    description: "Cactus amigurumi para decorar tu hogar",
    category: "Plantas",
    inStock: true
  },
  {
    id: "5",
    name: "Conejito Saltarín",
    price: 22.99,
    image: "https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=400&h=300&fit=crop",
    description: "Conejito adorable con orejas largas y suaves",
    category: "Animales",
    inStock: true
  },
  {
    id: "6",
    name: "Dragoncito Bebé",
    price: 42.99,
    image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=300&fit=crop",
    description: "Dragoncito tierno con alas y escamas brillantes",
    category: "Personajes",
    inStock: true
  },
  {
    id: "7",
    name: "Hamburguesa Kawaii",
    price: 19.99,
    image: "https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop",
    description: "Hamburguesa amigurumi con cara adorable",
    category: "Comida",
    inStock: true
  },
  {
    id: "8",
    name: "Rosa Encantada",
    price: 16.99,
    image: "https://images.unsplash.com/photo-1509423350716-97f9360b4e09?w=400&h=300&fit=crop",
    description: "Rosa amigurumi con pétalos suaves y color vibrante",
    category: "Plantas",
    inStock: false
  }
];

const categories = ["Todos", "Animales", "Personajes", "Comida", "Plantas", "Personalizados"];
---

<html lang="es">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Productos - ConCrochet</title>
		<meta name="description" content="Explora nuestra colección completa de amigurumis únicos" />
		
		<!-- Font Awesome -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
		
		<!-- Estilos globales -->
		<link rel="stylesheet" href="/src/styles/global.css">
	</head>
	<body>
		<!-- Navegación -->
		<Navbar />

		<!-- Header de la página -->
		<section class="py-5 bg-light">
			<div class="container">
				<div class="row">
					<div class="col-lg-8">
						<h1 class="fw-bold">Nuestros Productos</h1>
						<p class="text-muted">Descubre nuestra colección completa de amigurumis únicos</p>
					</div>
					<div class="col-lg-4 text-lg-end">
						<p class="text-muted mb-0">
							<strong>{allProducts.length}</strong> productos disponibles
						</p>
					</div>
				</div>
			</div>
		</section>

		<!-- Filtros y Productos -->
		<section class="py-5">
			<div class="container">
				<div class="row">
					<!-- Sidebar con filtros -->
					<div class="col-lg-3">
						<div class="card border-0 shadow-sm">
							<div class="card-body">
								<h5 class="card-title mb-3">
									<i class="fas fa-filter me-2"></i>
									Filtros
								</h5>
								
								<!-- Filtro por categoría -->
								<div class="mb-4">
									<h6>Categorías</h6>
									<div class="form-check">
										<input class="form-check-input" type="radio" name="category" id="all" checked>
										<label class="form-check-label" for="all">
											Todos ({allProducts.length})
										</label>
									</div>
									{categories.slice(1).map(category => {
										const count = allProducts.filter(p => p.category === category).length;
										return (
											<div class="form-check">
												<input class="form-check-input" type="radio" name="category" id={category.toLowerCase()}>
												<label class="form-check-label" for={category.toLowerCase()}>
													{category} ({count})
												</label>
											</div>
										);
									})}
								</div>

								<!-- Filtro por precio -->
								<div class="mb-4">
									<h6>Rango de Precio</h6>
									<div class="mb-2">
										<input type="range" class="form-range" id="priceRange" min="0" max="50" value="50">
									</div>
									<div class="d-flex justify-content-between">
										<span class="text-muted">$0</span>
										<span class="text-muted">$50</span>
									</div>
								</div>

								<!-- Filtro por disponibilidad -->
								<div class="mb-4">
									<h6>Disponibilidad</h6>
									<div class="form-check">
										<input class="form-check-input" type="checkbox" id="inStock" checked>
										<label class="form-check-label" for="inStock">
											En Stock
										</label>
									</div>
									<div class="form-check">
										<input class="form-check-input" type="checkbox" id="outOfStock">
										<label class="form-check-label" for="outOfStock">
											Agotado
										</label>
									</div>
								</div>

								<!-- Botón limpiar filtros -->
								<button class="btn btn-outline-secondary w-100" onclick="clearFilters()">
									<i class="fas fa-undo me-2"></i>
									Limpiar Filtros
								</button>
							</div>
						</div>
					</div>

					<!-- Productos -->
					<div class="col-lg-9">
						<!-- Ordenamiento -->
						<div class="d-flex justify-content-between align-items-center mb-4">
							<div class="d-flex align-items-center">
								<label class="me-2">Ordenar por:</label>
								<select class="form-select form-select-sm" style="width: auto;">
									<option>Más populares</option>
									<option>Precio: Menor a Mayor</option>
									<option>Precio: Mayor a Menor</option>
									<option>Nombre: A-Z</option>
									<option>Nombre: Z-A</option>
								</select>
							</div>
							<div class="d-flex align-items-center">
								<button class="btn btn-outline-secondary btn-sm me-2" onclick="toggleView('grid')">
									<i class="fas fa-th"></i>
								</button>
								<button class="btn btn-outline-secondary btn-sm" onclick="toggleView('list')">
									<i class="fas fa-list"></i>
								</button>
							</div>
						</div>

						<!-- Grid de productos -->
						<div class="row" id="productsGrid">
							{allProducts.map(product => (
								<ProductCard {...product} />
							))}
						</div>

						<!-- Paginación -->
						<nav aria-label="Navegación de productos" class="mt-5">
							<ul class="pagination justify-content-center">
								<li class="page-item disabled">
									<a class="page-link" href="#" tabindex="-1">Anterior</a>
								</li>
								<li class="page-item active">
									<a class="page-link" href="#">1</a>
								</li>
								<li class="page-item">
									<a class="page-link" href="#">2</a>
								</li>
								<li class="page-item">
									<a class="page-link" href="#">3</a>
								</li>
								<li class="page-item">
									<a class="page-link" href="#">Siguiente</a>
								</li>
							</ul>
						</nav>
					</div>
				</div>
			</div>
		</section>

		<!-- Footer -->
		<Footer />

		<!-- Toasts para notificaciones -->
		<div class="toast-container position-fixed bottom-0 end-0 p-3">
			<div id="cartToast" class="toast" role="alert">
				<div class="toast-header">
					<i class="fas fa-shopping-cart text-primary me-2"></i>
					<strong class="me-auto">Carrito</strong>
					<button type="button" class="btn-close" data-bs-dismiss="toast"></button>
				</div>
				<div class="toast-body">
					¡Producto agregado al carrito exitosamente!
				</div>
			</div>
			
			<div id="wishlistToast" class="toast" role="alert">
				<div class="toast-header">
					<i class="fas fa-heart text-danger me-2"></i>
					<strong class="me-auto">Favoritos</strong>
					<button type="button" class="btn-close" data-bs-dismiss="toast"></button>
				</div>
				<div class="toast-body">
					¡Producto agregado a favoritos!
				</div>
			</div>
		</div>

		<!-- Scripts de Bootstrap -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
		
		<script>
			function clearFilters() {
				// Limpiar todos los filtros
				const radios = document.querySelectorAll('input[type="radio"]') as NodeListOf<HTMLInputElement>;
				radios.forEach(radio => {
					radio.checked = false;
				});
				
				const allRadio = document.getElementById('all') as HTMLInputElement;
				if (allRadio) allRadio.checked = true;
				
				const priceRange = document.getElementById('priceRange') as HTMLInputElement;
				if (priceRange) priceRange.value = '50';
				
				const inStock = document.getElementById('inStock') as HTMLInputElement;
				const outOfStock = document.getElementById('outOfStock') as HTMLInputElement;
				if (inStock) inStock.checked = true;
				if (outOfStock) outOfStock.checked = false;
			}

			function toggleView(view: string) {
				const grid = document.getElementById('productsGrid');
				if (grid) {
					if (view === 'list') {
						grid.classList.add('list-view');
					} else {
						grid.classList.remove('list-view');
					}
				}
			}
		</script>
	</body>
</html> 